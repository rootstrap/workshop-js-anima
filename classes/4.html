<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>JS workshop</title>

    <link rel="stylesheet" href="../reveal.js/dist/reset.css" />
    <link rel="stylesheet" href="../reveal.js/dist/reveal.css" />
    <link
      rel="stylesheet"
      href="../reveal.js/dist/theme/black.css"
      id="theme"
    />

    <!-- Theme used for syntax highlighted code -->
    <link
      rel="stylesheet"
      href="../reveal.js/plugin/highlight/monokai.css"
      id="highlight-theme"
    />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <!-- Title -->
        <section>
          <h1>React</h1>
        </section>

        <!-- Schedule -->
        <section>
          <h3>Agenda</h3>
          <ol>
            <li>¿Qué es React?</li>
            <li>Componentes</li>
            <ol>
              <li>JSX</li>
              <li>Ciclo de Vida</li>
              <li>State vs Props</li>
              <li>Manejo de Eventos</li>
              <li>Renderizado Condicional</li>
            </ol>
          </ol>
        </section>

        <!-- What is React  -->
        <section>
          <h3>¿Qué es React?</h3>
        </section>

        <!-- JSX  -->
        <section>
          <h3>JSX</h3>
        </section>

        <!-- Lifecycle  -->
        <section>
          <h3>Ciclo de Vida</h3>
        </section>

        <!-- State vs Props  -->
        <section>
          <h3>State vs Props</h3>
        </section>

        <!-- Handling Events -->
        <section>
          <h3>Manejo de Eventos</h3>

          <section>
            <p>
              Los eventos son acciones que ocurren y provocan algún cambio o
              notificación en el Sistema.
            </p>
            <p>
              Cuando programamos nuestra página, nosotros decidimos sobre qué
              eventos queremos reaccionar y cómo.
            </p>
          </section>

          <section>
            <h4>Tipos de Eventos</h4>
            <p>Existen muchos tipos de eventos distintos, por ejemplo:</p>
            <ul>
              <li>Hacer click sobre algún elemento</li>
              <li>Presionar alguna tecla</li>
              <li>Pasar el mouse por arriba de algún elemento (hover)</li>
              <li>Cambiar algún campo de un formulario (change)</li>
              <li>Apretar el botón de confirmar de un formulario (submit)</li>
            </ul>
          </section>

          <section>
            <h4>Detectar Eventos en React</h4>
            <p>
              Para detectar el evento <b>click</b> se puede utilizar la
              propiedad <b>onClick</b> de los elementos:
            </p>
            <pre><code data-line-numbers data-trim class="language-javascript"><script type="text/template">
              <button onClick={this.manejadorClick}>
                PRESIONAME
              </button>
            </script></code></pre>
            <p>
              <b>manejadorClick</b> es una función definida dentro de la clase.
              Para que funcione, es necesario hacer un bind en el constructor:
            </p>
            <pre><code data-line-numbers data-trim class="language-javascript">
              this.manejadorClick = this.manejadorClick.bind(this);
            </code></pre>
          </section>

          <section>
            <p>
              Una forma de evitar hacer el bind, es utilizar
              <b>Funciones Flecha</b>:
            </p>
            <pre><code data-line-numbers data-trim class="language-javascript"><script type="text/template">
              <button onClick={() => this.manejadorClick()}>
                PRESIONAME
              </button>
            </script></code></pre>
            <p>
              Este código es equivalente al anterior, ahorrando la necesidad de
              hacer el bind en el constructor.
            </p>
            <p>Por esto, de ahora en adelante, usaremos funciones flecha.</p>
          </section>

          <section>
            <h4>Pasar parámetros a los manejadores</h4>
            <p>
              Muchas veces vamos a precisar mandar parámetros extra a la función
              que maneja el evento, por ejemplo, un identificador.
            </p>
            <pre><code data-line-numbers data-trim class="lang-javascript"><script type="text/template">
              <button onClick={(e) => this.eliminarFila(id, e)}>Eliminar Fila</button>
            </script></code></pre>
            <p>La función <b>eliminarFila</b> va a recibir 2 parámetros:</p>
            <ol>
              <li><b>id:</b> identificador de la fila</li>
              <li><b>e: </b> el evento ocurrido</li>
            </ol>
          </section>
        </section>

        <!-- Conditional Rendering -->
        <section>
          <h3>Renderizado Condicional</h3>

          <section>
            <p>
              En React, se pueden crear distintos componentes que encapsulen el
              comportamiento que se quiere.
            </p>
            <p>
              Se puede renderizar algunos de ellos, dependiendo del estado de la
              aplicación.
            </p>
            <p>
              Esto hace que no siempre se vea lo mismo, sino que dependiendo del
              estado de la aplicación se va a ver un componente u otro.
            </p>
          </section>

          <section>
            <p>Para hacer esto, se puede usar el operador <b>if</b></p>
            <p>Supongamos que tenemos estos dos componentes:</p>
            <pre><code data-line-numbers data-trim><script type="text/template">
              function BienvenidaUsuario(props) {
                return <h1>Bienvenido de vuelta!</h1>;
              }
              
              function BienvenidaInvitado(props) {
                return <h1>Por favor registrate.</h1>;
              }
            </script></code></pre>
            <p>
              y queremos que se vea uno u otro dependiendo si el usuario esta
              registrado o es un invitado.
            </p>
          </section>

          <section>
            <p>
              Vamos a crear un un componente <b>Bienvenida</b> que mueste el
              mensaje adecuado:
            </p>
            <pre><code data-line-numbers data-trim><script type="text/template">
              function Bienvenida(props) {
                const estaRegistrado = props.estaRegistrado;
                if (estaRegistrado) {
                  return <BienvenidaUsuario />;
                }
                return <BienvenidaInvitado />;
              }
              
              ReactDOM.render(
                // se le dice si el usuario está registrado o no
                <Bienvenida estaRegistrado={false} />,
                document.getElementById('root')
              );
            </script></code></pre>
          </section>

          <section>
            <p>
              Una alternativa al operador <b>if</b> es utilizar el
              <b>Operador Condicional Ternario</b> que brinda javascript:
            </p>
            <pre><code data-line-numbers data-trim><script type="text/template">
              function Bienvenida(props) {
                const estaRegistrado = props.estaRegistrado;

                return estaRegistrado ? <BienvenidaUsuario /> : <BienvenidaInvitado />;
              }
              
              ReactDOM.render(
                // se le dice si el usuario está registrado o no
                <Bienvenida estaRegistrado={false} />,
                document.getElementById('root')
              );
            </script></code></pre>
            <p>Este código es equivalente al recién visto, donde:</p>
            <p>condición ? verdadero : falso</p>
          </section>

          <section>
            <h4>Variables de Elementos</h4>
            <p>Se pueden usar variables para almacenar elementos.</p>
            <p>
              Sirve para renderizar condicionalmente una parte del componente
              mientras el resto del resultado no cambia.
            </p>
          </section>

          <section>
            <p>
              Supongamos que tenemos dos botones, para iniciar y cerrar sesión
              respectivamente:
            </p>
            <pre><code data-line-numbers data-trim><script type="text/template">
              function BotonIniciarSesion(props) {
                return (
                  <button onClick={props.onClick}>
                    Iniciar Sesión
                  </button>
                );
              }
              
              function BotonCerrarSesion(props) {
                return (
                  <button onClick={props.onClick}>
                    Cerrar Sesión
                  </button>
                );
              }
            </script></code></pre>
          </section>

          <section>
            <p>
              Vamos a crear un componente con estado, llamado
              <b>ControlSesion</b>.
            </p>
            <p>
              El componente va a renderizar <b>BotonIniciarSesion</b> o
              <b>BotonCerrarSesion</b> dependiendo de su estado actual. También
              va a renderizar <b>Bienvenida</b> del ejemplo anterior.
            </p>
          </section>

          <section>
            <pre><code data-line-numbers data-trim class="lang-java"><script type="text/template">
              class ControlSesion extends React.Component {
                constructor(props) {
                  super(props);
                  this.state = {estaRegistrado: false};
                }

                manejadorIniciarSesion() {
                  this.setState({estaRegistrado: true});
                }

                manejadorCerrarSesion() {
                  this.setState({estaRegistrado: false});
                }

                render() {
                  const estaRegistrado = this.state.estaRegistrado;
                  let boton;
                  estaRegistrado ?
                    boton = <BotonCerrarSesion onClick={() => this.manejadorCerrarSesion()} />;
                  :
                    boton = <BotonIniciarSesion onClick={() => this.manejadorIniciarSesion()} />;

                  return (
                    <div>
                      <Bienvenida estaRegistrado={estaRegistrado} />
                      {boton}
                    </div>
                  );
                }
              }

              ReactDOM.render(
                <ControlSesion />,
                document.getElementById('root')
              );
            </script></code></pre>
            <p>
              Notar que usamos las funciones flecha para evitar el bind y en
              lugar del if usamos el Operador Ternario.
            </p>
          </section>

          <section>
            <p>
              Declarar una variable y usar if es una buena forma de renderizar
              condicionalmente un componente pero también hay formas de hacer
              condiciones en una sola línea en JSX.
            </p>
            <p>
              Para incluir expresiones en JSX hay que envolver el código con las
              llaves "{ }". Para incluir condicionalmente un elemento puede ser
              útil usar el operador lógico <b>&&</b> de JavaScript.
            </p>
          </section>

          <section>
            <pre><code data-line-numbers data-trim class="lang-java"><script type="text/template">
              function BuzonCorreo(props) {
                const mensajesSinLeer = props.mensajesSinLeer;
                return (
                  <div>
                    <h1>Hola!</h1>
                    {mensajesSinLeer.length > 0 &&
                      <h2>
                        Tenés {mensajesSinLeer.length} mensajes sin leer.
                      </h2>
                    }
                  </div>
                );
              }
              
              const mensajes = ['React', 'Re: React', 'Re:Re: React'];
              ReactDOM.render(
                <BuzonCorreo mensajesSinLeer={mensajes} />,
                document.getElementById('root')
              );
            </script></code></pre>
            <p>
              En este caso, solo se muestra la cantidad de mensajes sin leer si
              se tiene al menos 1 mensaje sin leer.
            </p>
          </section>

          <section>
            <p>Esto funciona porque en JavaScript:</p>
            <ul>
              <li><b>true && expresión</b> = expresión</li>
              <li><b>false && expresión</b> = false</li>
            </ul>
            <p>
              Por eso, si la condición es true, el elemento justo después de &&
              aparecerá en el resultado. Si es false, React lo ignorará.
            </p>
          </section>
        </section>
      </div>
    </div>

    <script src="../reveal.js/dist/reveal.js"></script>
    <script src="../reveal.js/plugin/notes/notes.js"></script>
    <script src="../reveal.js/plugin/markdown/markdown.js"></script>
    <script src="../reveal.js/plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });
    </script>
  </body>
</html>
